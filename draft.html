<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Reusable Searchable Dropdown</title>
    </head>
    <body class="flex flex-col items-center justify-center h-screen bg-gray-100 space-y-4">
        <div>
            <button id="selectFunction1" class="px-2 py-2 bg-blue-500 text-white text-xs rounded-md"
                onclick="createDropdown(1)">Show
                Dropdown
                1</button>
            <div id="dropdownContainer1" class="fixed"></div>
        </div>

        <div>
            <div id="selectFunction2">
                <button class="px-2 py-2 bg-blue-500 text-white text-xs rounded-md" onclick="createDropdown(2)">Show
                    Dropdown
                    1</button>
            </div>
            <div id="dropdownContainer2" class="fixed"></div>
            </div>
<script>
    function createDropdown(id, selectedText = "Select an option") {
        console.log(id)
        const dropdownContainer = document.getElementById(`dropdownContainer${id}`);
        const selectFunction = document.getElementById(`selectFunction${id}`);
        const options = ["Option 1", "Option 2", "Option 3", "Option 4"];
        const dropdown = document.createElement('div');
        selectFunction.innerHTML = ''
        dropdown.className = 'relative w-64';
        dropdown.innerHTML = `
                                                                    <button class="w-full bg-white border border-gray-300 rounded-md px-4 py-2 text-left shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                                        ${selectedText}
                                                                    </button>
                                                                    <div class="absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg">
                                                                        <div class="p-2">
                                                                            <input type="text" placeholder="Search..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                                        </div>
                <ul class="max-h-40 overflow-y-auto">
                    ${options.map(option => `<li class="px-4 py-2 hover:bg-gray-100 cursor-pointer">${option}</li>`).join('')}
                </ul>
            </div>
        `;

                const button = dropdown.querySelector('button');
                const dropdownMenu = dropdown.querySelector('div.absolute');
                const searchInput = dropdown.querySelector('input');
                const optionsList = dropdown.querySelector('ul');

                button.addEventListener('click', () => {
                    dropdownMenu.classList.toggle('hidden');
                    searchInput.value = '';
                    filterOptions();
                });

                searchInput.addEventListener('input', filterOptions);

                optionsList.querySelectorAll('li').forEach(option => {
                    option.addEventListener('click', () => {
                        button.textContent = option.textContent;
                        dropdownMenu.classList.add('hidden');
                    });
                });

                function filterOptions() {
                    const filter = searchInput.value.toLowerCase();
                    optionsList.querySelectorAll('li').forEach(option => {
                        const text = option.textContent.toLowerCase();
                        option.style.display = text.includes(filter) ? 'block' : 'none';
                    });
                }

                document.addEventListener('click', (event) => {
                    if (!dropdown.contains(event.target)) {
                        dropdownMenu.classList.add('hidden');
                    }
                });

                dropdownContainer.innerHTML = '';
                dropdownContainer.appendChild(dropdown);
                return dropdown;
            }

                                                                                                        function showDropdown(event, defaultOption) {
                                                                                                            dropdownContainer.innerHTML = '';
                                                                                                            const dropdown = createDropdown(defaultOption, ["Option 1", "Option 2", "Option 3", "Option 4"]);
                                                                                                            dropdownContainer.appendChild(dropdown);
                                                                                                    
                                                                                                                                                                                                                requestAnimationFrame(() => {
                                                                                                                                                                                                                    const rect = event.target.getBoundingClientRect();
                                                                                                                                                                                                                    dropdownContainer.style.top = `${rect.bottom}px`;
                                                                                                                                                                                                                    dropdownContainer.style.left = `${rect.left}px`;
                                                                                                                                                                                                                });
                                                                                                                                                                                                            }
                                                                                                                                                                                                        </script>
</body>
</html>